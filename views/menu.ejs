<%- include('partials/header', { lang, siteName, t, currentPath, requestPath }) %>
<section class="section">
  <div class="section-header">
    <h2><%= t('menuTitle') %></h2>
    <p><%= t('menuIntro') %></p>
  </div>
  <form id="menuForm">
    <div class="card-grid">
      <% if (items.length === 0) { %>
      <div class="card"><p><%= t('noItems') %></p></div>
      <% } %>
      <% items.forEach(function(item){ %>
      <label class="card" for="menu-<%= item.id %>">
        <div class="grid-two">
          <div>
            <h3><%= item.title %></h3>
            <p><%= item.description %></p>
          </div>
          <div style="text-align:right;">
            <div class="price-tag"><%= item.formattedPrice %></div>
            <div>
              <input
                type="checkbox"
                id="menu-<%= item.id %>"
                name="items"
                value="<%= item.id %>"
                data-menu-item
                data-title="<%= item.title %>"
                data-price="<%= item.price %>"
              />
              <span><%= t('orderButton') %></span>
            </div>
          </div>
        </div>
      </label>
      <% }) %>
    </div>
  </form>
  <div class="admin-card" style="margin-top:2rem;">
    <h3><%= t('totalLabel') %>: <span id="orderTotal" data-empty="<%= t('totalEmpty') %>"><%= t('totalEmpty') %></span></h3>
    <button class="btn btn-primary" id="openOrder" disabled><%= t('orderButton') %></button>
  </div>
</section>

<div class="modal" id="orderModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3><%= t('orderModalTitle') %></h3>
      <button class="modal-close" data-close-modal="orderModal">×</button>
    </div>
    <ul id="orderList"></ul>
    <form id="orderForm" data-empty="<%= t('totalEmpty') %>">
      <label for="address"><%= t('addressLabel') %></label>
      <input class="form-control" type="text" id="address" name="address" required />
      <label for="phone"><%= t('phoneLabel') %></label>
      <input class="form-control" type="tel" id="phone" name="phone" required />
      <button class="btn btn-primary" type="submit"><%= t('submitOrder') %></button>
      <div id="orderSuccess" class="success-message hidden"></div>
      <div id="orderError" class="error-message hidden"></div>
    </form>
  </div>
</div>

<div class="modal" id="bookingModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3><%= t('bookingModalTitle') %></h3>
      <button class="modal-close" data-close-modal="bookingModal">×</button>
    </div>
    <form id="bookingForm">
      <input type="hidden" id="bookingProgram" name="programId" />
      <p id="programNameDisplay" class="price-tag"></p>
      <label for="name"><%= t('yourName') %></label>
      <input class="form-control" type="text" id="name" name="name" required />
      <label for="childName"><%= t('childName') %></label>
      <input class="form-control" type="text" id="childName" name="childName" required />
      <label for="phoneProgram"><%= t('contactPhone') %></label>
      <input class="form-control" type="tel" id="phoneProgram" name="phone" required />
      <label for="date"><%= t('plannedDate') %></label>
      <input class="form-control" type="date" id="date" name="date" required />
      <button class="btn btn-primary" type="submit"><%= t('sendRequest') %></button>
      <div id="bookingSuccess" class="success-message hidden"></div>
      <div id="bookingError" class="error-message hidden"></div>
    </form>
  </div>
</div>

<%- include('partials/footer', { t }) %>
