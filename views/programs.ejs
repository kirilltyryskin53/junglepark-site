<%- include('partials/header', { lang, siteName, t, currentPath, requestPath }) %>
<section class="section">
  <div class="section-header">
    <h2><%= t('programsTitle') %></h2>
    <p><%= t('programIntro') %></p>
  </div>
  <div class="card-grid">
    <% if (programs.length === 0) { %>
    <div class="card"><p><%= t('emptyState') %></p></div>
    <% } %>
    <% programs.forEach(function(program) { %>
    <div class="card">
      <h3><%= program.title %></h3>
      <p><%= program.description %></p>
      <div class="price-tag"><%= program.formattedPrice %></div>
      <div>
        <strong><%= t('costumes') %>:</strong>
        <p><%= program.costumes.join(', ') %></p>
      </div>
      <% if (program.available) { %>
      <button class="btn btn-primary" data-program-id="<%= program.id %>" data-program-title="<%= program.title %>">
        <%= t('bookButton') %>
      </button>
      <% } else { %>
      <div class="error-message"><%= t('programUnavailable') %></div>
      <% } %>
    </div>
    <% }) %>
  </div>
</section>

<div class="modal" id="bookingModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3><%= t('bookingModalTitle') %></h3>
      <button class="modal-close" data-close-modal="bookingModal">Ã—</button>
    </div>
    <form id="bookingForm">
      <input type="hidden" id="bookingProgram" name="programId" />
      <p id="programNameDisplay" class="price-tag"></p>
      <label for="name"><%= t('yourName') %></label>
      <input class="form-control" type="text" id="name" name="name" required />
      <label for="childName"><%= t('childName') %></label>
      <input class="form-control" type="text" id="childName" name="childName" required />
      <label for="phoneProgram"><%= t('contactPhone') %></label>
      <input class="form-control" type="tel" id="phoneProgram" name="phone" required />
      <label for="date"><%= t('plannedDate') %></label>
      <input class="form-control" type="date" id="date" name="date" required />
      <button class="btn btn-primary" type="submit"><%= t('sendRequest') %></button>
      <div id="bookingSuccess" class="success-message hidden"></div>
      <div id="bookingError" class="error-message hidden"></div>
    </form>
  </div>
</div>

<%- include('partials/footer', { t }) %>
