<%- include('partials/header', { lang, siteName, t, currentPath, requestPath }) %>
<section class="main-hero">
  <div class="hero-content">
    <h1><%= t('welcomeTitle') %></h1>
    <p><%= t('menuIntro') %></p>
    <div class="hero-buttons">
      <a class="btn btn-primary" href="/menu?lang=<%= lang %>"><%= t('menuButton') %></a>
      <a class="btn btn-outline" href="/programs?lang=<%= lang %>"><%= t('programButton') %></a>
      <a class="btn btn-primary" href="<%= whatsAppLink %>" target="_blank" rel="noopener">
        <%= t('contactButton') %>
      </a>
    </div>
  </div>
</section>

<section class="section" id="menu">
  <div class="section-header">
    <h2><%= t('menuTitle') %></h2>
    <p><%= t('menuIntro') %></p>
  </div>
  <div class="card-grid">
    <% if (menu.length === 0) { %>
    <div class="card"><p><%= t('noItems') %></p></div>
    <% } %>
    <% menu.forEach(function(item) { %>
    <div class="card">
      <h3><%= item.title %></h3>
      <p><%= item.description %></p>
      <div class="price-tag"><%= item.formattedPrice %></div>
    </div>
    <% }) %>
  </div>
  <div class="hero-buttons" style="margin-top:2rem;">
    <a class="btn btn-primary" href="/menu?lang=<%= lang %>"><%= t('orderButton') %></a>
  </div>
</section>

<section class="section" id="programs">
  <div class="section-header">
    <h2><%= t('programsTitle') %></h2>
    <p><%= t('programIntro') %></p>
  </div>
  <div class="card-grid">
    <% if (programs.length === 0) { %>
    <div class="card"><p><%= t('emptyState') %></p></div>
    <% } %>
    <% programs.forEach(function(program) { %>
    <div class="card">
      <h3><%= program.title %></h3>
      <p><%= program.description %></p>
      <div class="price-tag"><%= program.formattedPrice %></div>
      <div>
        <strong><%= t('costumes') %>:</strong>
        <p><%= program.costumes.join(', ') %></p>
      </div>
      <button class="btn btn-primary" data-program-id="<%= program.id %>" data-program-title="<%= program.title %>">
        <%= t('bookButton') %>
      </button>
    </div>
    <% }) %>
  </div>
</section>

<div class="modal" id="bookingModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3><%= t('bookingModalTitle') %></h3>
      <button class="modal-close" data-close-modal="bookingModal">Ã—</button>
    </div>
    <form id="bookingForm">
      <input type="hidden" id="bookingProgram" name="programId" />
      <p id="programNameDisplay" class="price-tag"></p>
      <label for="name"><%= t('yourName') %></label>
      <input class="form-control" type="text" id="name" name="name" required />
      <label for="childName"><%= t('childName') %></label>
      <input class="form-control" type="text" id="childName" name="childName" required />
      <label for="phoneProgram"><%= t('contactPhone') %></label>
      <input class="form-control" type="tel" id="phoneProgram" name="phone" required />
      <label for="date"><%= t('plannedDate') %></label>
      <input class="form-control" type="date" id="date" name="date" required />
      <button class="btn btn-primary" type="submit"><%= t('sendRequest') %></button>
      <div id="bookingSuccess" class="success-message hidden"></div>
      <div id="bookingError" class="error-message hidden"></div>
    </form>
  </div>
</div>

<%- include('partials/footer', { t }) %>
